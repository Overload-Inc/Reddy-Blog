<h1>{{ componentTitle | append | enclose : '*' }}</h1>

<!-- Form based on Bootstrap styles to create new users -->
<div class="container mt-5">

  <div class="form-area">

    <!-- Use of NgForm template to send and manipulate form values via (ngSubmit) -->
    <form #userForm="ngForm" (ngSubmit)="onSubmit(userForm)">

      <div class="form-group">
        <label>User name</label>
        <input type="text" placeholder="User name"
               class="form-control" name="fullName"
               ngModel #fullName="ngModel"
               (change)="getValue(fullName)" required>
        <div class="alert alert-danger" *ngIf="fullName.invalid && fullName.touched">User name is required</div>
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email" placeholder="User email"
               class="form-control" name="email"
               #email="ngModel" (change)="getValue(email)"
               pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
               ngModel required>
        <div class="alert alert-danger" *ngIf="email.invalid && email.touched">Email is required</div>
      </div>

      <div class="form-group">
        <label>Address</label>
        <textarea cols="30" rows="10" placeholder="User Address"
                  class="form-control" name="address"
                  #address="ngModel" (change)="getValue(address)"
                  ngModel required></textarea>
        <div class="alert alert-danger" *ngIf="address.invalid && address.touched">User address is required</div>
      </div>

      <button type="submit" class="btn btn-primary" [disabled]="userForm.invalid">Save data</button>

    </form>

  </div>

</div>

<div *ngIf="userList.length > 0; then usersTable else emptyTable"></div>

<!-- NgTemplate to make the table visible in case of data stored -->
<ng-template #usersTable>
  <div class="table-area">
    <table width="500">
      <thead>
      <th>Id</th>
      <th>User</th>
      <th>Email</th>
      <th>Address</th>
      <th>Action</th>
      </thead>
      <tbody>
      <tr *ngFor="let user of userList; let i = index">
        <td>{{ i | number }}</td>
        <td>{{ user.fullName }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.address }}</td>
        <td><button (click)="deleteUser(i)">Delete</button></td>
      </tr>
      </tbody>
    </table>
  </div>
</ng-template>

<!-- NgTemplate to display a message of empty array -->
<ng-template #emptyTable>
  <div class="form-area">
    <h4>There are no users registered</h4>
  </div>
</ng-template>
